"use strict";
'use client';
Object.defineProperty(exports, "__esModule", { value: true });
exports.CopyToClipboard = void 0;
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
const React = tslib_1.__importStar(require("react"));
const react_copy_to_clipboard_1 = tslib_1.__importDefault(require("react-copy-to-clipboard"));
const INITIAL_STATUS = 'pending';
function CopyToClipboard(props) {
    const { children, text, options, timeout, onCopy } = props;
    const [status, setStatus] = React.useState(INITIAL_STATUS);
    const timerIdRef = React.useRef();
    const content = React.useMemo(() => children(status), [children, status]);
    const handleCopy = React.useCallback((copyText, result) => {
        setStatus(result ? 'success' : 'error');
        window.clearTimeout(timerIdRef.current);
        timerIdRef.current = window.setTimeout(() => setStatus(INITIAL_STATUS), timeout);
        onCopy === null || onCopy === void 0 ? void 0 : onCopy(copyText, result);
    }, [onCopy, timeout]);
    React.useEffect(() => () => window.clearTimeout(timerIdRef.current), []);
    if (!React.isValidElement(content)) {
        throw new Error('Content must be a valid react element');
    }
    return ((0, jsx_runtime_1.jsx)(react_copy_to_clipboard_1.default, { text: text, onCopy: handleCopy, options: options, children: content }));
}
exports.CopyToClipboard = CopyToClipboard;
